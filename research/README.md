# MONGO
# QuickStart

Для запуска теста необходимо выполнить следующие команды:
```
docker-compose -f mongo/docker-compose.yaml up  --build
bash mongo/build.sh
pip install -r requirements.txt
python -m mongo.run_test_mongodb
```


# Результат Mongo DB

### Запись лайков
| Размер Батча | Время записи на батч | Время записи 1 элемента |
|:------------:|:--------------------:|:-----------------------:|
|      1       |      0.013 сек       |        0.013 сек        |
|      10      |      0.052 сек       |        0.005 сек        |
|      50      |      0.202 сек       |        0.004 сек        |
|     100      |      0.337 сек       |       0.0033 сек        |
|     200      |      0.711 сек       |       0.0035 сек        |
|     500      |      1.721 сек       |       0.0034 сек        |
|     1000     |      3.641 сек       |       0.0036 сек        |
|     2000     |      7.023 сек       |       0.0035 сек        |
|     5000     |      23.775 сек      |       0.0047 сек        |

### Запись ревью
| Размер Батча | Время записи на батч | Время записи 1 элемента |
|:------------:|:--------------------:|:-----------------------:|
|      1       |      0.0467 сек      |       0.0467 сек        |
|      10      |      0.096 сек       |       0.0096 сек        |
|      50      |      0.376 сек       |       0.0075 сек        |
|     100      |      0.535 сек       |       0.0053 сек        |
|     200      |      0.999 сек       |       0.0050 сек        |
|     500      |      3.114 сек       |       0.0062 сек        |
|     1000     |      5.287 сек       |       0.0053 сек        |
|     2000     |      10.755 сек      |       0.0054 сек        |
|     5000     |      26.474 сек      |       0.0053 сек        |

### Запись закладок
| Размер Батча | Время записи на батч | Время записи 1 элемента |
|:------------:|:--------------------:|:-----------------------:|
|      1       |      0.015 сек       |       0.0152 сек        |
|      10      |      0.068 сек       |       0.0068 сек        |
|      50      |      0.280 сек       |       0.0060 сек        |
|     100      |      0.513 сек       |       0.0051 сек        |
|     200      |      0.928 сек       |       0.0046 сек        |
|     500      |      2.351 сек       |       0.0047 сек        |
|     1000     |      4.912 сек       |       0.0049 сек        |
|     2000     |      10.183 сек      |       0.0051 сек        |
|     5000     |      25.459 сек      |       0.0051 сек        |



**Установлен оптимальный размер батча для записи**: 200 элементов.

### Чтение
Эксперимент на определение среднего времени чтения проводился по пользователям со средним числом записей 500.

|   Тип    | Время (секунд) |
|:--------:|:--------------:|
|  лайки   |   0.086 сек    |
|  ревью   |   0.128 сек    |
| закладки |   0.088 сек    |


# CLICKHOUSE
# QuickStart

Для запуска теста необходимо выполнить следующие команды:
```
docker-compose -f clickhouse/docker-compose.yml up --build
python -m clickhouse_research.run_test_clickhouse
```

# Результат
### Запись лайков
| Размер Батча | Время записи на батч | Время записи 1 элемента |
|:------------:|:--------------------:|:-----------------------:|
|      1       |      0.005 сек       |        0.005 сек        |
|      10      |      0.003 сек       |       0.0002 сек        |
|      50      |      0.004 сек       |       8.3e-05 сек       |
|     100      |      0.007 сек       |       7.2e-05 сек       |
|     200      |      0.008 сек       |       4.2e-05 сек       |
|     500      |      0.015 сек       |        2e-05 сек        |
|     1000     |      0.022 сек       |       2.2e-05 сек       |
|     2000     |      0.043 сек       |       2.2e-05 сек       |
|     5000     |      0.095 сек       |       1.9e-05 cек       |

### Запись ревью
| Размер Батча | Время записи на батч | Время записи 1 элемента |
|:------------:|:--------------------:|:-----------------------:|
|      1       |      0.003 сек       |        0.003 сек        |
|      10      |      0.003 сек       |       0.0003 сек        |
|      50      |      0.004 сек       |        9e-05 сек        |
|     100      |      0.005 сек       |       5.1e-05 сек       |
|     200      |      0.007 сек       |       3.7e-05 сек       |
|     500      |      0.015 сек       |       3.0e-05 сек       |
|     1000     |      0.026 сек       |       2.6e-05 сек       |
|     2000     |      0.045 сек       |       2.2e-05 сек       |
|     5000     |      0.102 сек       |        2e-05 cек        |

### Запись закладок
| Размер Батча | Время записи на батч | Время записи 1 элемента |
|:------------:|:--------------------:|:-----------------------:|
|      1       |      0.003 сек       |        0.003 сек        |
|      10      |      0.003 сек       |       0.0003 сек        |
|      50      |      0.005 сек       |       10e-05 сек        |
|     100      |      0.005 сек       |       5.2e-05 сек       |
|     200      |      0.010 сек       |       5.1e-05 сек       |
|     500      |      0.015 сек       |       3.0e-05 сек       |
|     1000     |      0.023 сек       |       2.3e-05 сек       |
|     2000     |      0.040 сек       |       1.9e-05 сек       |
|     5000     |      0.091 сек       |       1.8e-05 cек       |


### Чтение
Эксперимент на определение среднего времени чтения проводился по пользователям со средним числом записей 500.

|   Тип    | Время (секунд) |
|:--------:|:--------------:|
|  лайки   |   0.015 сек    |
|  ревью   |   0.030 сек    |
| закладки |   0.020 сек    |
